dsl Ness

use Entities
use Events

Broker(path = empty, port = 63000, secondaryPort = 1884)
	User("trooper", "trooper")
	User("consul", "consul")
	User("connector", "connector")

Datalake(scale = Day, path = "{datalake}") dl
	Seal > Cron(pattern = "0 0 4 1/1 * ? *", timeZone = empty)
	Tank mode as Message(it.Mode)
	Tank assetStatus as Message(it.Status)
	Tank assetInfo as Message(it.Info)
	Tank anomaly as Message(monitoring.AnomalyBundle)
	Tank notification as Message(monitoring.Notification)

Terminal test-terminal
	Subscribe(dl.anomaly dl.assetInfo dl.assetStatus dl.mode)
	Publish(dl.notification)

Terminal monitor-terminal
	Publish(dl.assetInfo dl.assetStatus dl.mode)
	Subscribe(dl.anomaly)

Terminal wizard-terminal
	Publish(dl.anomaly)
	Subscribe(dl.mode dl.assetInfo dl.assetStatus)
//	Datamarts(d1 d2 d3...)
