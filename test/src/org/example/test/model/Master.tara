dsl Ness
Entity MapEntity as Abstract
	Attribute name as String

Entity Installation as ExtensionOf(MapEntity)
	Attribute type as Word("Videometry" "WeatherStation")
	Attribute place as Struct(GeoPoint)
	Attribute url as String

Entity Zone as ExtensionOf(MapEntity)
	Attribute place as Struct(GeoPoint) List
	Attribute ownerZone as Entity(Zone)
	Attribute childZones as Entity(Zone) List
	Attribute sensorIds as Entity(Installation) Set
	Attribute counter as Integer

	Method incrementCounter as Routine("counter++")

	Method hasChildren as BooleanGetter("!childZones().isEmpty()")

	Method firstChild as Function("hasChildren() ? childZones().get(0) : null")
		ReturnType as Entity(Zone)

	Method isChild as Function("childZones().contains(zone)")
		ReturnType as Boolean
		Parameter zone as Entity(Zone)


Entity AlertConfiguration
	Attribute entityId as String
	Attribute type as Word("BeachSandOccupancy" "DrySandArea" "WetSandArea" "Tide" "LostConnection")
	Attribute timeScale as Word("Minute" "Hour" "Day" "Week" "Month" "Year")
	Attribute enabledMin as Boolean
	Attribute min as Double
	Attribute enabledMax as Boolean
	Attribute max as Double
	Attribute recipients as String Set

Struct GeoPoint
	Attribute latitude as Double
	Attribute longitude as Double
	Method sqrtLength as DoubleGetter("latitude*latitude + longitude*longitude")