dsl Ness

Datalake(Month, path = "") datalake
	Context("") Divisiones
		Context DA;Context DB;Context DC;Context DD;Context DF;Context DG;Context DJ;Context DK;Context DL;Context DM;Context DN;Context DP;Context DU;Context DV;Context DW;Context DX;
	Context asemed
	Tank(event = criterio) criterio as Event Contextual(asemed)
	Tank(event = criterioBorrado) criterioBorrado as Event Contextual(asemed)
	Tank(event = criterioModificado) criterioModificado as Event Contextual(asemed)
	Tank(event = criterioSentencia) criterioSentencia as Event Contextual(asemed)

	Tank(event = usuarioConectado)usuarioConectado as Event
	Tank(event = usuarioDesconectado)usuarioDesconectado as Event

	Tank(event = ajuste) ajuste as Event Contextual(Divisiones)
	Tank(event = cierreAjuste) cierreAjuste as Event Contextual(Divisiones)

	Tank activos as Set(type = Singleton) Contextual(Divisiones)
	Tank inactivos as Set(type = Singleton) Contextual(Divisiones)

	Tank sessionEvent as Event(solution.sessionEvent)  Contextual(Divisiones)
	Backup
		Cron(pattern = "0 0 12 1/1 * ? *", timeZone = "Atlantic/Canary")

Broker(port = 63000, secondaryPort = 1884, path = "./broker")
	User(name = "user1", password = "1234")

Event criterio
	Attribute ts as Bool
	Attribute value as Text
	Attribute id as Integer
Event criterioBorrado
Event criterioModificado
Event criterioSentencia
Event ajuste

SessionEvent  sessionEvent
	Attribute id as Text
	Attribute userId as Text

Event cierreAjuste
Event usuarioConectado
Event usuarioDesconectado

Terminal  first
	Publish(tanks = datalake.cierreAjuste)
