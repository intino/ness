dsl Ness

Datalake(Month, path = "") datalake
	Context("") Divisiones
		Context DA;Context DB;Context DC;Context DD;Context DF;Context DG;Context DJ;Context DK;Context DL;Context DM;Context DN;Context DP;Context DU;Context DV;Context DW;Context DX;
	Context asemed
	Tank(criterio) criterio as Event Contextual(asemed)
	Tank(criterioBorrado) criterioBorrado as Event Contextual(asemed)
	Tank(criterioModificado) criterioModificado as Event Contextual(asemed)
	Tank(criterioSentencia) criterioSentencia as Event Contextual(asemed)

	Tank (message = usuarioConectado)usuarioConectado as Event
	Tank (message = usuarioDesconectado)usuarioDesconectado as Event

	Tank (message = ajuste) ajuste as Event Contextual(Divisiones)
	Tank (message = cierreAjuste) cierreAjuste as Event Contextual(Divisiones)

	Tank (message = activos) activos as Set(type = Singleton) Contextual(Divisiones)
	Tank (message = inactivos) inactivos as Set(type = Singleton) Contextual(Divisiones)

Broker(port = 63000, secondaryPort = 1884, path = "./broker")
	User(name = "user1", password = "1234")

Message criterio
	Attribute ts as Bool
	Attribute value as Text
	Attribute id as Integer
Message criterioBorrado
Message criterioModificado
Message criterioSentencia
Message activos
Message inactivos
Message ajuste
Message cierreAjuste
Message usuarioConectado
Message usuarioDesconectado

DataHubTerminal  first
	Publish(tanks = datalake.cierreAjuste)
	Subscribe(tanks = datalake.ajuste)